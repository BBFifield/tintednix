/*
  Based upon the dracula theme for libadwaita
  and adw-gtk3 - https://github.com/lassekongo83/adw-gtk3

  1. If ~/.config/gtk-4.0/gtk.css and/or ~/.config/gtk-3.0/gtk.css exists, make backups
  2. Enable the adw-gtk3-dark theme
  3. Save this file to ~/.config/gtk-4.0/gtk.css
  4. Make the file a symbolic link to ~/.config/gtk-3.0/gtk.css (or copy it to that location)
  5. Close and re-open any open apps or log out and in again
*/

/* Global color definitions */

/* {{{scheme-name}}} by {{{scheme-author}}} */

$variant: {{scheme-variant}}; // “dark” or “light”

@function shade-thin-shadow($var-name) { @return "1px 2px 2px rgba(0, 0, 0, 0.17), 2px 4px 4px rgba(0, 0, 0, 0.2), -1px -1px 0px color-mix(in oklab, var(#{$var-name}) 80%, white 10%)"; }
@function color-thin-shadow($var-name) { @return "1px 2px 2px rgba(0, 0, 0, 0.17), 2px 4px 4px rgba(0, 0, 0, 0.2), -1px -1px 0px color-mix(in oklab, var(#{$var-name}) 80%, white 40%)"; }

@function shade-wide-shadow($var-name) { @return "4px 12px 10px rgba(0, 0, 0, 0.2), 7px 18px 14px rgba(0, 0, 0, 0.21), 10px 24px 18px rgba(0, 0, 0, 0.25), 14px 30px 24px rgba(0, 0, 0, 0.3), -1px -1px 0px color-mix(in oklab, var(#{$var-name}) 80%, white 10%)"; }
@function color-wide-shadow($var-name) { @return "4px 12px 10px rgba(0, 0, 0, 0.2), 7px 18px 14px rgba(0, 0, 0, 0.21), 10px 24px 18px rgba(0, 0, 0, 0.25), 14px 30px 24px rgba(0, 0, 0, 0.3), -1px -1px 0px color-mix(in oklab, var(#{$var-name}) 80%, white 40%)"; }

@function shade-top-inset-shadow($var-name) { @return "1px 2px 2px color-mix(in oklab, var(#{$var-name}) 80%, black 20%) inset, 2px 4px 4px color-mix(in oklab, var(#{$var-name}) 80%, black 20%) inset"; }
@function shade-top-thin-inset-shadow($var-name) { @return "1px 1px 1px color-mix(in oklab, var(#{$var-name}) 80%, black 20%) inset, 2px 2px 2px color-mix(in oklab, var(#{$var-name}) 80%, black 20%) inset"; }

@function color-top-inset-shadow($var-name) { @return "1px 2px 2px color-mix(in oklab, var(#{$var-name}) 80%, black 70%) inset, 2px 4px 4px color-mix(in oklab, var(#{$var-name}) 80%, black 70%) inset"; }
@function color-top-thin-inset-shadow($var-name) { @return "1px 1px 1px color-mix(in oklab, var(#{$var-name}) 80%, black 70%) inset, 2px 2px 2px color-mix(in oklab, var(#{$var-name}) 80%, black 70%) inset"; }

@function shade-heavy-bottom-inset-shadow($var-name) { @return "-1px -1px 0px color-mix(in oklab, var(#{$var-name}) #{if($variant == dark, "80%, white 10%", "0%, white 100%")}) inset"; }
@function shade-bottom-inset-shadow($var-name) { @return "-1px -1px 0px color-mix(in oklab, var(#{$var-name}) #{if($variant == dark, "80%, white 10%", "50%, white 50%")}) inset"; }
@function color-bottom-inset-shadow($var-name) { @return "-1px -1px 0px color-mix(in oklab, var(#{$var-name}) #{if($variant == dark, "80%, white 60%", "80%, white 20%")}) inset"; }

@function shade-heavy-separator-mimc-shadow($var-name) { @return "-2px 0px 0px color-mix(in oklab, var(#{$var-name}) 80%, black 90%), -1px 0px 0px color-mix(in oklab, var(#{$var-name}) 80%, black 20%), 1px 0px 0px color-mix(in oklab, var(#{$var-name}) 80%, white 10%) inset"; }
@function shade-separator-mimc-shadow($var-name) { @return "-2px 0px 0px color-mix(in oklab, var(#{$var-name}) 80%, black 15%), -1px 0px 0px color-mix(in oklab, var(#{$var-name}) 80%, black 5%), 1px 0px 0px color-mix(in oklab, var(#{$var-name}) 80%, white 10%) inset"; }

/// Mixin: ripple-out-keyframes
/// @param $color-var  CSS custom‐property name (e.g. --ripple-color)
/// @param $name       Animation name (defaults to ripple-out)
@mixin ripple-out-keyframes($color-var, $name: ripple-out) {
  @at-root {
    @keyframes #{$name} {
      from {
        background-image: #{unquote(
          "radial-gradient(circle farthest-corner at center, \
           alpha(var(#{$color-var}), 1) 0%, transparent 0%)"
        )};
      }
      to {
        background-image: #{unquote(
          "radial-gradient(circle farthest-corner at center, \
           alpha(var(#{$color-var}), 1) 100%, transparent 0%)"
        )};
      }
    }
  }
}

/// Mixin: ripple-in-keyframes
/// @param $color-var  CSS custom‐property name (e.g. --ripple-color)
/// @param $name       Animation name (defaults to ripple-in)
@mixin ripple-in-keyframes($color-var, $name: ripple-in) {
  @at-root {
    @keyframes #{$name} {
      from {
        background-image: #{unquote(
          "radial-gradient(circle farthest-corner at center, \
           alpha(var(#{$color-var}), 1) 100%, transparent 0%)"
        )};
      }
      to {
        background-image: #{unquote(
          "radial-gradient(circle farthest-corner at center, \
           alpha(var(#{$color-var}), 1) 0%, transparent 0%)"
        )};
      }
    }
  }
}

@define-color base00 #{{base00-hex}};
@define-color base01 #{{base01-hex}};
@define-color base02 #{{base02-hex}};
@define-color base03 #{{base03-hex}};
@define-color base04 #{{base04-hex}};
@define-color base05 #{{base05-hex}};
@define-color base06 #{{base06-hex}};
@define-color base07 #{{base07-hex}};
@define-color base08 #{{base08-hex}};
@define-color base09 #{{base09-hex}};
@define-color base0A #{{base0A-hex}};
@define-color base0B #{{base0B-hex}};
@define-color base0C #{{base0C-hex}};
@define-color base0D #{{base0D-hex}};
@define-color base0E #{{base0E-hex}};
@define-color base0F #{{base0F-hex}};

@define-color window_bg_color @base01;
@define-color window_fg_color @base0D;
@define-color view_bg_color   @base00;
@define-color view_fg_color   @window_fg_color;
@define-color accent_bg_color @base0D;
@define-color accent_color    @accent_bg_color;
@define-color headerbar_bg_color    @window_bg_color;
@define-color headerbar_fg_color    @window_fg_color;
@define-color headerbar_border_color @base02;
@define-color popover_bg_color @base01;
@define-color popover_fg_color @view_fg_color;
@define-color dialog_bg_color  @popover_bg_color;
@define-color dialog_fg_color  @popover_fg_color;
@define-color card_bg_color    rgba(255,255,255,0.08);
@define-color card_fg_color    @window_fg_color;
@define-color sidebar_bg_color @headerbar_bg_color;
@define-color sidebar_fg_color @window_fg_color;
@define-color sidebar_backdrop_color @window_bg_color;
@define-color sidebar_border_color   @base02;
@define-color sidebar_shade_color    rgba(0,0,0,0.25);
@define-color success_bg_color @base0B;
@define-color success_fg_color @base0B;
@define-color warning_bg_color @base0A;
@define-color warning_fg_color @base0A;
@define-color error_bg_color   @base08;
@define-color error_fg_color   @base08;
@define-color orange           @base09;
@define-color light_blue       @base0C;
@define-color purple           @base0E;


:root {
  /* Base16 tokens */
  --base00: @base00;  --base01: @base01;  --base02: @base02;
  --base03: @base03;  --base04: @base04;  --base05: @base05;
  --base06: @base06;  --base07: @base07;  --base08: @base08;
  --base09: @base09;  --base0A: @base0A;  --base0B: @base0B;
  --base0C: @base0C;  --base0D: @base0D;  --base0E: @base0E;
  --base0F: @base0F;

  /* Semantic colors */
  --window-bg-color:    @window_bg_color;
  --window-fg-color:    @window_fg_color;
  --view-bg-color:      @view_bg_color;
  --view-fg-color:      @view_fg_color;
  --accent-bg-color:    @accent_bg_color;
  --accent-fg-color:    @accent_color;
  --headerbar-bg-color: @headerbar_bg_color;
  --headerbar-fg-color: @headerbar_fg_color;
  --headerbar-border-color: @headerbar_border_color;
  --popover-bg-color:   @popover_bg_color;
  --popover-fg-color:   @popover_fg_color;
  --dialog-bg-color:    @dialog_bg_color;
  --dialog-fg-color:    @dialog_fg_color;
  --card-bg-color:      @card_bg_color;
  --card-fg-color:      @card_fg_color;
  --sidebar-bg-color:   @sidebar_bg_color;
  --sidebar-fg-color:   @sidebar_fg_color;
  --sidebar-backdrop-color: @sidebar_backdrop_color;
  --sidebar-border-color:   @sidebar_border_color;
  --sidebar-shade-color:    @sidebar_shade_color;
  --success-bg-color:  @success_bg_color;
  --success-fg-color:  @success_fg_color;
  --warning-bg-color:  @warning_bg_color;
  --warning-fg-color:  @warning_fg_color;
  --error-bg-color:    @error_bg_color;
  --error-fg-color:    @error_fg_color;
  --orange:            @orange;
  --light-blue:        @light_blue;
  --purple:            @purple;


  --shadow-inset-base00: #{shade-top-inset-shadow(--base00)}, #{shade-heavy-bottom-inset-shadow(--base00)}; /* Bottom inset shadow for more extreme shades (usually base00 and base02) */
  --shadow-inset-base01: #{shade-top-inset-shadow(--base01)}, #{shade-heavy-bottom-inset-shadow(--base01)};
  --shadow-inset-base02: #{shade-top-inset-shadow(--base02)}, #{shade-bottom-inset-shadow(--base02)}; /* Bottom inset shadow for duller shades (usually base02-base07) */
  --shadow-inset-base08: #{color-top-inset-shadow(--base08)}, #{color-bottom-inset-shadow(--base08)};
  --shadow-inset-base0D: #{color-top-inset-shadow(--base0D)}, #{color-bottom-inset-shadow(--base0D)};
  --shadow-inset-base0B: #{color-top-inset-shadow(--base0B)}, #{color-bottom-inset-shadow(--base0B)};
  --shadow-inset-base00-thin: #{shade-top-thin-inset-shadow(--base00)}, #{shade-bottom-inset-shadow(--base00)};
  --shadow-inset-base01-thin: #{shade-top-thin-inset-shadow(--base01)}, #{shade-bottom-inset-shadow(--base01)};
  --shadow-inset-base02-thin: #{shade-top-thin-inset-shadow(--base02)}, #{shade-bottom-inset-shadow(--base02)};
  --shadow-inset-base0D-thin: #{color-top-thin-inset-shadow(--base0D)}, #{color-bottom-inset-shadow(--base0D)};
  --shadow-inset-base0B-thin: #{color-top-thin-inset-shadow(--base0B)}, #{color-bottom-inset-shadow(--base0B)};

  --shadow-thin-base00: #{shade-thin-shadow(--base00)};
  --shadow-thin-base01: #{shade-thin-shadow(--base01)};
  --shadow-thin-base02: #{shade-thin-shadow(--base02)};
  --shadow-thin-base08: #{color-thin-shadow(--base08)};
  --shadow-thin-base09: #{color-thin-shadow(--base09)};
  --shadow-thin-base0A: #{color-thin-shadow(--base0A)};
  --shadow-thin-base0B: #{color-thin-shadow(--base0B)};
  --shadow-thin-base0D: #{color-thin-shadow(--base0D)};

  --shadow-wide-base01: #{shade-wide-shadow(--base01)};
  --shadow-wide-base02: #{shade-wide-shadow(--base02)};
  --shadow-wide-base08: #{color-wide-shadow(--base08)};

  --shadow-separator-mimc-base00: #{shade-heavy-separator-mimc-shadow(--base00)};
  --shadow-separator-mimc-base01: #{shade-heavy-separator-mimc-shadow(--base01)};
  --shadow-separator-mimc-base02: #{shade-separator-mimc-shadow(--base02)};

  @include ripple-out-keyframes(--base0D, ripple-out-base0D);
  @include ripple-out-keyframes(--base08, ripple-out-base08);
  @include ripple-out-keyframes(--base09, ripple-out-base09);
  @include ripple-out-keyframes(--base0A, ripple-out-base0A);
  @include ripple-out-keyframes(--base0B, ripple-out-base0B);
  @include ripple-in-keyframes(--base0D, ripple-in-base0D);
  @include ripple-in-keyframes(--base08, ripple-in-base08);
  @include ripple-in-keyframes(--base09, ripple-in-base09);
  @include ripple-in-keyframes(--base0A, ripple-in-base0A);
  @include ripple-in-keyframes(--base0B, ripple-in-base0B);
}
