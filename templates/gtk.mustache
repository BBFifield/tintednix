/*
  Based upon the dracula theme for libadwaita
  and adw-gtk3 - https://github.com/lassekongo83/adw-gtk3

  1. If ~/.config/gtk-4.0/gtk.css and/or ~/.config/gtk-3.0/gtk.css exists, make backups
  2. Save this file to ~/.config/gtk-4.0/gtk.css
  3. Make the file a symbolic link to ~/.config/gtk-3.0/gtk.css (or copy it to that location)
  4. Close and re-open any open apps or log out and in again
*/

/* Global color definitions */

/* {{{scheme-name}}} by {{{scheme-author}}} */

@use "sass:color";

$variant: {{scheme-variant}}; // “dark” or “light”


@function top-extra-thin-inset-shadow($var-name) {
  @return "1px 1px 1px color-mix(in oklab, var(#{$var-name}) 65%, black) inset";
}

@function shade-top-thin-inset-shadow($var-name) {
  @return "1px 1px 1px color-mix(in oklab, var(#{$var-name}) 80%, black) inset, 2px 2px 2px color-mix(in oklab, var(#{$var-name}) 80%, black) inset";
}

@function color-heavy-top-thin-inset-shadow($var-name) {
  @return "1px 1px 1px color-mix(in oklab, var(#{$var-name}) 60%, black) inset, 2px 2px 2px color-mix(in oklab, var(#{$var-name}) 60%, black) inset";
}

@function color-light-top-thin-inset-shadow($var-name) {
  @return "1px 1px 1px color-mix(in oklab, var(#{$var-name}) 85%, black) inset, 2px 2px 2px color-mix(in oklab, var(#{$var-name}) 85%, black) inset";
}

@function shade-top-deep-inset-shadow($var-name) {
  @return "1px 2px 2px color-mix(in oklab, var(#{$var-name}) 80%, black) inset, 2px 4px 4px color-mix(in oklab, var(#{$var-name}) 80%, black) inset";
}

@function color-top-deep-inset-shadow($var-name) {
  @return "1px 2px 2px color-mix(in oklab, var(#{$var-name}) 60%, black) inset, 2px 4px 4px color-mix(in oklab, var(#{$var-name}) 60%, black) inset";
}

@function color-dull-top-deep-inset-shadow($var-name) {
  @return "1px 2px 2px color-mix(in oklab, var(#{$var-name}) 25%, black) inset, 2px 4px 4px color-mix(in oklab, var(#{$var-name}) 25%, black) inset";
}

@function shade-heavy-bottom-inset-shadow($var-name) {
  @return "-1px -1px 0px color-mix(in oklab, var(#{$var-name}) #{if($variant == dark, '90%', '0%')}, white) inset";
}

@function shade-light-bottom-inset-shadow($var-name) {
  @return "-1px -1px 0px color-mix(in oklab, var(#{$var-name}) #{if($variant == dark, '90%', '50%')}, white) inset";
}

@function color-bottom-inset-shadow($var-name) {
  @return "-1px -1px 0px color-mix(in oklab, var(#{$var-name}) #{if($variant == dark, '55%', '80%')}, white) inset";
}

@function color-dull-bottom-inset-shadow($var-name) {
  @return "-1px -1px 0px color-mix(in oklab, var(#{$var-name}) 65%, black) inset";
}

@function shade-thin-shadow($var-name) {
  @return "1px 2px 2px rgba(0, 0, 0, 0.17), 2px 4px 4px rgba(0, 0, 0, 0.2), -1px -1px 0px color-mix(in oklab, var(#{$var-name}) 90%, white)";
}

@function color-thin-shadow($var-name) {
  @return "1px 2px 2px rgba(0, 0, 0, 0.17), 2px 4px 4px rgba(0, 0, 0, 0.2), -1px -1px 0px color-mix(in oklab, var(#{$var-name}) 65%, white)";
}

@function color-dull-thin-shadow($var-name) {
  @return "1px 2px 2px rgba(0, 0, 0, 0.17), 2px 4px 4px rgba(0, 0, 0, 0.2), -1px -1px 0px color-mix(in oklab, var(#{$var-name}) 65%, black)";
}

@function shade-wide-shadow($var-name) {
  @return "4px 12px 10px rgba(0, 0, 0, 0.2), 7px 18px 14px rgba(0, 0, 0, 0.21), 10px 24px 18px rgba(0, 0, 0, 0.25), 14px 30px 24px rgba(0, 0, 0, 0.3), -1px -1px 0px color-mix(in oklab, var(#{$var-name}) 90%, white)";
}

@function color-wide-shadow($var-name) {
  @return "4px 12px 10px rgba(0, 0, 0, 0.2), 7px 18px 14px rgba(0, 0, 0, 0.21), 10px 24px 18px rgba(0, 0, 0, 0.25), 14px 30px 24px rgba(0, 0, 0, 0.3), -1px -1px 0px color-mix(in oklab, var(#{$var-name}) 65%, white)";
}

@function shade-extra-light-horizontal-separator-mimic-shadow($var-name) {
  @return "0px -2px 0px color-mix(in oklab, var(#{$var-name}) 85%, black), 0px -1px 0px color-mix(in oklab, var(#{$var-name}) 95%, black), 0px 1px 0px color-mix(in oklab, var(#{$var-name}) #{if($variant == dark, '95%', '0%')}, white) inset";
}

@function shade-heavy-horizontal-separator-mimic-shadow($var-name) {
  @return "0px -2px 0px color-mix(in oklab, var(#{$var-name}) 65%, black), 0px -1px 0px color-mix(in oklab, var(#{$var-name}) 90%, black), 0px 1px 0px color-mix(in oklab, var(#{$var-name}) #{if($variant == dark, '90%', '0%')}, white) inset";
}

@function shade-light-horizontal-separator-mimic-shadow($var-name) {
  @return "0px -2px 0px color-mix(in oklab, var(#{$var-name}) 75%, black), 0px -1px 0px color-mix(in oklab, var(#{$var-name}) 90%, black), 0px 1px 0px color-mix(in oklab, var(#{$var-name}) #{if($variant == dark, '90%', '0%')}, white) inset";
}

@function shade-heavy-vertical-separator-mimic-shadow($var-name) {
  @return "-2px 0px 0px color-mix(in oklab, var(#{$var-name}) 65%, black), -1px 0px 0px color-mix(in oklab, var(#{$var-name}) 80%, black), 1px 0px 0px color-mix(in oklab, var(#{$var-name}) #{if($variant == dark, '90%', '0%')}, white) inset";
}

@function shade-light-vertical-separator-mimic-shadow($var-name) {
  @return "-2px 0px 0px color-mix(in oklab, var(#{$var-name}) 75%, black), -1px 0px 0px color-mix(in oklab, var(#{$var-name}) 90%, black), 1px 0px 0px color-mix(in oklab, var(#{$var-name}) #{if($variant == dark, '90%', '0%')}, white) inset";
}

@function shade-heavy-bottom-horizontal-separator-mimic-shadow($var-name) {
  @return "0px -2px 0px color-mix(in oklab, var(#{$var-name}) 65%, black) inset, 0px -1px 0px color-mix(in oklab, var(#{$var-name}) 90%, black) inset, 0px 1px 0px color-mix(in oklab, var(#{$var-name}) #{if($variant == dark, '90%', '0%')}, white)";
}

@function shade-light-bottom-horizontal-separator-mimic-shadow($var-name) {
  @return "0px -2px 0px color-mix(in oklab, var(#{$var-name}) 75%, black) inset, 0px -1px 0px color-mix(in oklab, var(#{$var-name}) 90%, black) inset, 0px 1px 0px color-mix(in oklab, var(#{$var-name}) #{if($variant == dark, '90%', '0%')}, white)";
}


/// Mixin: ripple-out-keyframes
/// @param $color-var  CSS custom‐property name (e.g. --ripple-color)
/// @param $name       Animation name (defaults to ripple-out)
@mixin ripple-out-keyframes($color-var, $name: ripple-out) {
  @at-root {
    @keyframes #{$name} {
      from {
        background-image: #{unquote(
          "radial-gradient(circle farthest-corner at center, \
           alpha(var(#{$color-var}), 1) 0%, transparent 0%)"
        )};
      }
      to {
        background-image: #{unquote(
          "radial-gradient(circle farthest-corner at center, \
           alpha(var(#{$color-var}), 1) 100%, transparent 0%)"
        )};
      }
    }
  }
}


/// Mixin: ripple-in-keyframes
/// @param $color-var  CSS custom‐property name (e.g. --ripple-color)
/// @param $name       Animation name (defaults to ripple-in)
@mixin ripple-in-keyframes($color-var, $name: ripple-in) {
  @at-root {
    @keyframes #{$name} {
      from {
        background-image: #{unquote(
          "radial-gradient(circle farthest-corner at center, \
           alpha(var(#{$color-var}), 1) 100%, transparent 0%)"
        )};
      }
      to {
        background-image: #{unquote(
          "radial-gradient(circle farthest-corner at center, \
           alpha(var(#{$color-var}), 1) 0%, transparent 0%)"
        )};
      }
    }
  }
}

$base00: #{{base00-hex}};
$base01: #{{base01-hex}};
$base02: #{{base02-hex}};
$base03: #{{base03-hex}};
$base04: #{{base04-hex}};
$base05: #{{base05-hex}};
$base06: #{{base06-hex}};
$base07: #{{base07-hex}};
$base08: #{{base08-hex}};
$base09: #{{base09-hex}};
$base0A: #{{base0A-hex}};
$base0B: #{{base0B-hex}};
$base0C: #{{base0C-hex}};
$base0D: #{{base0D-hex}};
$base0E: #{{base0E-hex}};
$base0F: #{{base0F-hex}};

@define-color base00 #{{base00-hex}};
@define-color base01 #{{base01-hex}};
@define-color base02 #{{base02-hex}};
@define-color base03 #{{base03-hex}};
@define-color base04 #{{base04-hex}};
@define-color base05 #{{base05-hex}};
@define-color base06 #{{base06-hex}};
@define-color base07 #{{base07-hex}};
@define-color base08 #{{base08-hex}};
@define-color base09 #{{base09-hex}};
@define-color base0A #{{base0A-hex}};
@define-color base0B #{{base0B-hex}};
@define-color base0C #{{base0C-hex}};
@define-color base0D #{{base0D-hex}};
@define-color base0E #{{base0E-hex}};
@define-color base0F #{{base0F-hex}};

@define-color window_bg_color @base01;
@define-color window_fg_color @base0D;
@define-color view_bg_color   @base00;
@define-color view_fg_color   @window_fg_color;
@define-color accent_bg_color @base0D;
@define-color accent_color    @accent_bg_color;
@define-color headerbar_bg_color    @window_bg_color;
@define-color headerbar_fg_color    @window_fg_color;
@define-color headerbar_border_color @base02;
@define-color popover_bg_color @base01;
@define-color popover_fg_color @view_fg_color;
@define-color dialog_bg_color  @popover_bg_color;
@define-color dialog_fg_color  @popover_fg_color;
@define-color card_bg_color    rgba(255,255,255,0.08);
@define-color card_fg_color    @window_fg_color;
@define-color sidebar_bg_color @headerbar_bg_color;
@define-color sidebar_fg_color @window_fg_color;
@define-color sidebar_backdrop_color @window_bg_color;
@define-color sidebar_border_color   @base02;
@define-color sidebar_shade_color    rgba(0,0,0,0.25);
@define-color success_bg_color @base0B;
@define-color success_fg_color @base0B;
@define-color warning_bg_color @base0A;
@define-color warning_fg_color @base0A;
@define-color error_bg_color   @base08;
@define-color error_fg_color   @base08;
@define-color orange           @base09;
@define-color light_blue       @base0C;
@define-color purple           @base0E;

// base00
@define-color base00-black-95        #{color.mix($base00, black, $weight: 95%, $method: oklab)};
@define-color base00-white-90       #{color.mix($base00, white, $weight: 90%, $method: oklab)};
@define-color base00-black-85        #{color.mix($base00, black, $weight: 85%, $method: oklab)};
@define-color base00-black-80        #{color.mix($base00, black, $weight: 80%, $method: oklab)};
@define-color base00-black-65        #{color.mix($base00, black, $weight: 65%, $method: oklab)};
@define-color base00-white-95-dark  #{color.mix(
  $base00,
  white,
  $weight: if($variant == dark, 95%, 0%),
  $method: oklab
)};
@define-color base00-white-90-dark  #{color.mix(
  $base00,
  white,
  $weight: if($variant == dark, 90%, 0%),
  $method: oklab
)};

// base01
@define-color base01-black-95 #{color.mix($base01, black, $weight: 95%, $method: oklab)};
@define-color base01-white-90 #{color.mix($base01, white, $weight: 90%, $method: oklab)};
@define-color base01-black-85 #{color.mix($base01, black, $weight: 85%, $method: oklab)};
@define-color base01-black-80 #{color.mix($base01, black, $weight: 80%, $method: oklab)};
@define-color base01-black-65 #{color.mix($base01, black, $weight: 65%, $method: oklab)};
@define-color base01-white-95-dark #{color.mix(
  $base01,
  white,
  $weight: if($variant == dark, 95%, 0%),
  $method: oklab
)};
@define-color base01-white-90-dark  #{color.mix(
  $base01,
  white,
  $weight: if($variant == dark, 90%, 0%),
  $method: oklab
)};

// base02
@define-color base02-white-90 #{color.mix($base02, white, $weight: 90%, $method: oklab)};
@define-color base02-black-80 #{color.mix($base02, black, $weight: 80%, $method: oklab)};
@define-color base02-black-75 #{color.mix($base02, black, $weight: 75%, $method: oklab)};
@define-color base02-black-65 #{color.mix($base02, black, $weight: 65%, $method: oklab)};
@define-color base02-white-90-dark #{color.mix(
  $base02,
  white,
  $weight: if($variant == dark, 90%, 0%),
  $method: oklab
)};
@define-color base02-white-0-dark #{color.mix(
  $base02,
  white,
  $weight: if($variant == dark, 0%, 65%),
  $method: oklab
)};

// base08
@define-color base08-black-85 #{color.mix($base08, black, $weight: 85%, $method: oklab)};
@define-color base08-black-65 #{color.mix($base08, black, $weight: 65%, $method: oklab)};
@define-color base08-white-65 #{color.mix($base08, white, $weight: 65%, $method: oklab)};
@define-color base08-black-60 #{color.mix($base08, black, $weight: 60%, $method: oklab)};
@define-color base08-black-50 #{color.mix($base08, black, $weight: 50%, $method: oklab)};
@define-color base08-black-25 #{color.mix($base08, black, $weight: 25%, $method: oklab)};

// base09 & base0A
@define-color base09-white-60 #{color.mix($base09, white, $weight: 60%, $method: oklab)};
@define-color base0A-white-65 #{color.mix($base0A, white, $weight: 65%, $method: oklab)};

// base0B
@define-color base0B-black-85 #{color.mix($base0B, black, $weight: 85%, $method: oklab)};
@define-color base0B-black-80 #{color.mix($base0B, black, $weight: 80%, $method: oklab)};
@define-color base0B-black-65 #{color.mix($base0B, black, $weight: 65%, $method: oklab)};
@define-color base0B-white-65 #{color.mix($base0B, white, $weight: 65%, $method: oklab)};
@define-color base0B-black-60 #{color.mix($base0B, black, $weight: 60%, $method: oklab)};
@define-color base0B-black-50 #{color.mix($base0B, black, $weight: 50%, $method: oklab)};
@define-color base0B-black-25 #{color.mix($base0B, black, $weight: 25%, $method: oklab)};
@define-color base0B-white-55-dark  #{color.mix(
  $base0B,
  white,
  $weight: if($variant == dark, 55%, 80%),
  $method: oklab
)};

// base0D
@define-color base0D-black-65 #{color.mix($base0D, black, $weight: 65%, $method: oklab)};
@define-color base0D-white-65 #{color.mix($base0D, white, $weight: 65%, $method: oklab)};
@define-color base0D-black-60 #{color.mix($base0D, black, $weight: 60%, $method: oklab)};
@define-color base0D-white-55-dark  #{color.mix(
  $base0D,
  white,
  $weight: if($variant == dark, 55%, 80%),
  $method: oklab
)};


:root {
  /* Base16 tokens */
  --base00: @base00;  --base01: @base01;  --base02: @base02;
  --base03: @base03;  --base04: @base04;  --base05: @base05;
  --base06: @base06;  --base07: @base07;  --base08: @base08;
  --base09: @base09;  --base0A: @base0A;  --base0B: @base0B;
  --base0C: @base0C;  --base0D: @base0D;  --base0E: @base0E;
  --base0F: @base0F;

  /* Semantic colors */
  --window-bg-color:    @window_bg_color;
  --window-fg-color:    @window_fg_color;
  --view-bg-color:      @view_bg_color;
  --view-fg-color:      @view_fg_color;
  --accent-bg-color:    @accent_bg_color;
  --accent-fg-color:    @accent_color;
  --headerbar-bg-color: @headerbar_bg_color;
  --headerbar-fg-color: @headerbar_fg_color;
  --headerbar-border-color: @headerbar_border_color;
  --popover-bg-color:   @popover_bg_color;
  --popover-fg-color:   @popover_fg_color;
  --dialog-bg-color:    @dialog_bg_color;
  --dialog-fg-color:    @dialog_fg_color;
  --card-bg-color:      @card_bg_color;
  --card-fg-color:      @card_fg_color;
  --sidebar-bg-color:   @sidebar_bg_color;
  --sidebar-fg-color:   @sidebar_fg_color;
  --sidebar-backdrop-color: @sidebar_backdrop_color;
  --sidebar-border-color:   @sidebar_border_color;
  --sidebar-shade-color:    @sidebar_shade_color;
  --success-bg-color:  @success_bg_color;
  --success-fg-color:  @success_fg_color;
  --warning-bg-color:  @warning_bg_color;
  --warning-fg-color:  @warning_fg_color;
  --error-bg-color:    @error_bg_color;
  --error-fg-color:    @error_fg_color;
  --orange:            @orange;
  --light-blue:        @light_blue;
  --purple:            @purple;

  --shadow-inset-extra-thin-base00: #{top-extra-thin-inset-shadow(--base00)}, #{shade-heavy-bottom-inset-shadow(--base00)};
  --shadow-inset-extra-thin-base01: #{top-extra-thin-inset-shadow(--base01)}, #{shade-heavy-bottom-inset-shadow(--base01)};
  --shadow-inset-extra-thin-base02: #{top-extra-thin-inset-shadow(--base02)}, #{shade-light-bottom-inset-shadow(--base02)};
  --shadow-inset-extra-thin-base0D: #{top-extra-thin-inset-shadow(--base0D)}, #{color-bottom-inset-shadow(--base0D)};

  --shadow-inset-thin-base00: #{shade-top-thin-inset-shadow(--base00)}, #{shade-heavy-bottom-inset-shadow(--base00)};
  --shadow-inset-thin-base01: #{shade-top-thin-inset-shadow(--base01)}, #{shade-heavy-bottom-inset-shadow(--base01)};
  --shadow-inset-thin-base02: #{shade-top-thin-inset-shadow(--base02)}, #{shade-light-bottom-inset-shadow(--base02)};
  --shadow-inset-thin-base0B: #{color-heavy-top-thin-inset-shadow(--base0B)}, #{color-bottom-inset-shadow(--base0B)};
  --shadow-inset-thin-base0D: #{color-heavy-top-thin-inset-shadow(--base0D)}, #{color-bottom-inset-shadow(--base0D)};

  --shadow-inset-base00: #{shade-top-deep-inset-shadow(--base00)}, #{shade-heavy-bottom-inset-shadow(--base00)}; /* Bottom inset shadow for more extreme shades (usually base00 and base01) */
  --shadow-inset-base01: #{shade-top-deep-inset-shadow(--base01)}, #{shade-heavy-bottom-inset-shadow(--base01)};
  --shadow-inset-base02: #{shade-top-deep-inset-shadow(--base02)}, #{shade-light-bottom-inset-shadow(--base02)}; /* Bottom inset shadow for duller shades (usually base02-base07) */
  --shadow-inset-base08: #{shade-top-deep-inset-shadow(--base08)}, #{color-bottom-inset-shadow(--base08)};
  --shadow-inset-base0B: #{color-top-deep-inset-shadow(--base0B)}, #{color-bottom-inset-shadow(--base0B)};
  --shadow-inset-base0D: #{color-top-deep-inset-shadow(--base0D)}, #{color-bottom-inset-shadow(--base0D)};

  --shadow-inset-base08-dull: #{color-dull-top-deep-inset-shadow(--base08)}, #{color-dull-bottom-inset-shadow(--base08)};
  --shadow-inset-base0B-dull: #{color-dull-top-deep-inset-shadow(--base0B)}, #{color-dull-bottom-inset-shadow(--base0B)};

  --shadow-thin-base00: #{shade-thin-shadow(--base00)};
  --shadow-thin-base01: #{shade-thin-shadow(--base01)};
  --shadow-thin-base02: #{shade-thin-shadow(--base02)};
  --shadow-thin-base08: #{color-thin-shadow(--base08)};
  --shadow-thin-base09: #{color-thin-shadow(--base09)};
  --shadow-thin-base0A: #{color-thin-shadow(--base0A)};
  --shadow-thin-base0B: #{color-thin-shadow(--base0B)};
  --shadow-thin-base0D: #{color-thin-shadow(--base0D)};

  --shadow-thin-base08-dull: #{color-dull-thin-shadow(--base08)};
  --shadow-thin-base0B-dull: #{color-dull-thin-shadow(--base0B)};

  --shadow-wide-base01: #{shade-wide-shadow(--base01)};
  --shadow-wide-base02: #{shade-wide-shadow(--base02)};
  --shadow-wide-base08: #{color-wide-shadow(--base08)};

  --shadow-light-separator-mimic-horizontal-base00: #{shade-extra-light-horizontal-separator-mimic-shadow(--base00)};

  --shadow-separator-mimic-horizontal-base00: #{shade-heavy-horizontal-separator-mimic-shadow(--base00)};
  --shadow-separator-mimic-horizontal-base01: #{shade-heavy-horizontal-separator-mimic-shadow(--base01)};
  --shadow-separator-mimic-horizontal-base02: #{shade-light-horizontal-separator-mimic-shadow(--base02)};
  --shadow-separator-mimic-vertical-base00: #{shade-heavy-vertical-separator-mimic-shadow(--base00)};
  --shadow-separator-mimic-vertical-base01: #{shade-heavy-vertical-separator-mimic-shadow(--base01)};
  --shadow-separator-mimic-vertical-base02: #{shade-light-vertical-separator-mimic-shadow(--base02)};

  --shadow-separator-mimic-bottom-horizontal-base00: #{shade-heavy-bottom-horizontal-separator-mimic-shadow(--base00)};
  --shadow-separator-mimic-bottom-horizontal-base01: #{shade-heavy-bottom-horizontal-separator-mimic-shadow(--base01)};

  @include ripple-out-keyframes(--base0D, ripple-out-base0D);
  @include ripple-out-keyframes(--base08, ripple-out-base08);
  @include ripple-out-keyframes(--base09, ripple-out-base09);
  @include ripple-out-keyframes(--base0A, ripple-out-base0A);
  @include ripple-out-keyframes(--base0B, ripple-out-base0B);
  @include ripple-in-keyframes(--base0D, ripple-in-base0D);
  @include ripple-in-keyframes(--base08, ripple-in-base08);
  @include ripple-in-keyframes(--base09, ripple-in-base09);
  @include ripple-in-keyframes(--base0A, ripple-in-base0A);
  @include ripple-in-keyframes(--base0B, ripple-in-base0B);
}
